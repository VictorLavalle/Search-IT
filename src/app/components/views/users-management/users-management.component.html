<app-header></app-header>
<app-nav-bar></app-nav-bar>

<section class="vh-50">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-20">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">
              <p class="title text-center h1 fw-bold mb-5 mx-1 mx-md-4">
                Manejo de usuarios
              </p>
              <div class="col col-xs-2 left-column">
                <h2>Crear usuario</h2>
                <hr />
                <form [formGroup]="createUserForm">

                  <div class="mb-3">
                    <label class="form-label" for="username">Correo Electronico:</label>
                    <input type="email" class="form-control" formControlName="username" name="username">
                  </div>

                  <div class="mb-3">
                    <label class="form-label" for="password">Contrase√±a:</label>
                    <input type="password" class="form-control" formControlName="password" name="password">
                  </div>

                  <div class="col-sm-6">
                    <h5 class="mt-3">Permisos</h5>
                    <label for="">Administrador&nbsp;</label>
                    <input type="checkbox" name="admin" id="" formControlName="checkboxAdmin">
                    <label for="">Buscar Documentos &nbsp;</label>
                    <input type="checkbox" name="query" id="" formControlName="checkboxQuery">
                    <label for="">Subir documentos &nbsp;</label>
                    <input type="checkbox" name="upload" id="" formControlName="checkboxUpload">
                    <label for="">Gestionar Usuarios &nbsp;</label>
                    <input type="checkbox" name="user_mgmt" id="" formControlName="checkboxUserMgmt">
                  </div>

                  <button (click)="createUser()">Crear usuario</button>

                </form>
              </div>

              <div class="col right-column justify-content-center">
                <h2>Lista de usuarios</h2>
                <hr />

                <div class="scroll table-responsive-xxl" id="tableResults">
                  <table class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th scope="col">Correo electronico</th>
                        <th scope="col">Permisos</th>
                        <th scope="col">Acciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!--  -->
                      <tr *ngFor="let user of users">
                        <td>{{user.username}}</td>
                        <td>
                          <p *ngFor="let rol of user.roles">{{rol}}</p>
                        </td>
                        <td>
                          <button><a [routerLink]="['/edit', user.id]">Modificar usuario</a></button>
                          <button (click)="deleteUser($event)" title='{{user.id}}'>Eliminar Usuario </button>
                        </td>
                    </tbody>
                  </table>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
